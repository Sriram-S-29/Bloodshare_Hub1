<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="/Public/css/camp.css" />
</head>

<body>
    <div class="hed">
        <p>Total Donors : {{C_Tot}} &nbsp;&nbsp;&nbsp;&nbsp; |</p>&nbsp;
        <p>Total Donors in your District : {{C_dis}}</p>
    </div><br>
    <div class="redbox">
        <div>
            <img class="himg" src="/Public/img/logonew.png" alt="logo" />
        </div>
        <div class="l">
            <nav>
                <a href="/home">Home</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="/appointment">Appointment</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="/response">Respond</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a id="now" href="/camp">Camp</a>

            </nav>
        </div>
        <div class="profile">
            <img src="/Public/img/profile.png" alt="profile">
            <div class="dropdown">
                <a href="/profile">Profile</a>
                <a href="/">Logout</a>
            </div>
        </div>


    </div>


    <table>
        <thead>
            <tr>
                <th>DATE</th>
                <th>District</th>
                <th>PLACE</th>
                <th>Contact no</th>
                <th>Start Time</th>
                <th>End Time</th>
                <th>Section</th>
                <th>Response</th>
                
            </tr>
        </thead>
        <tbody>


            {{#each camp}}
            <form method="post"  id="campForm" action="/campin/{{this.id}}">
                <tr>
                    <td>{{this.date}}</td>
                    <td>{{this.district}}</td>
                    <td style="width: 300px; height: 200px;">
                        <iframe src="{{this.place}}" frameborder="0" style="width: 100%; height: 100%;"></iframe>
                    </td>
                    <td>{{this.phno}}</td>
                    <td>{{this.startTime}}</td>
                        <td>{{this.endTime}}</td>
                    <td><select id="timeOfDay" name="period">
                            <option value="Morning">Morning</option>
                            <option value="Afternoon">Afternoon</option>
                            <option value="Evening">Evening</option>
                        </select></td>
                        
                    <td><input type="button" onclick="call()"  value="submit"></td>
                </tr>
            </form>

            {{/each}}
        </tbody>
    </table>
    {{!-- <div class="sticky-box">
        STATS
    </div> --}}
     {{!-- <footer class="foot">
        &copy; Code by Sriram
    </footer> --}}
</body>
<script>
     function call() {
            console.log("in enteres")
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes"
            }).then((result) => {
                if (result.isConfirmed) {
                    document.getElementById("campForm").submit();
                }
            });
        }

        let msg='{{msg}}'
        if(msg)
        {
            ok(msg)
        }
        else
        {
            console.log('no')
        }
        function ok(msg) {
            console.log("OK seet")
            const Toast = Swal.mixin({
                toast: true,
                position: "top-end",
                showConfirmButton: false,
                timer: 5000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.onmouseenter = Swal.stopTimer;
                    toast.onmouseleave = Swal.resumeTimer;
                }
            });
            Toast.fire({
                icon: "success",
                title: msg
            });
        }

</script>


</html>